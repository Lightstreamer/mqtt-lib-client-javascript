<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Interface: MqttClient</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Interface: MqttClient</h1>
    
    




<section>

<header>
    
        <h2>MqttClient</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        
            <div class="description">Interface to be used for communicating with an MQTT broker. An
<code>MqttClient</code> instance actually acts as MQTT client.
<p>
<code>MqttClient</code> enables a virtual <i>end-to-end</i> connection to
the broker as if there was a direct link between the two end points.
A virtual end-to-end connection comprises the following two distinct
links:
<ul>
  <li><b>MQTT channel</b>, which is the logical channel established over
    the physical MQTT&#46;Cool connection, between
    <code>MqttClient</code> and the MQTT&#46;Cool server.
  </li>
  <li><b>broker connection</b>, which is the physical MQTT connection
    between the MQTT&#46;Cool server and the MQTT broker.
  </li>
</ul>
In an end-to-end connection, MQTT&#46;Cool takes the role
of a real <i>MQTT server proxy</i>, as it acts as an intermediary for the
MQTT Control Packets wrapped into
<i>MQTT&#46;Cool Protocol</i> messages and transported over
the MQTT channel, as well as for the MQTT Control Packets transported
<i>as is</i> over the broker connection.
<p>
Once obtained by invoking the <a href="MQTTCoolSession.html#createClient">MQTTCoolSession#createClient</a>
method, an <code>MqttClient</code> object is already configured to open a
connection to the target MQTT broker.
<p>
Based on the way a broker connection is managed on the server side,
an end-to-end connection can be of two types, <i>dedicated</i> or
<i>shared</i>:
<ul>
  <li><b>Dedicated End-to-End Connection</b>.
  <p>
    For each <code>MqttClient</code> that is provided with a valid client
    identifier at the time of creation through
    <code>MQTTCoolSession</code>, MQTT&#46;Cool establishes
    on the server side a dedicated broker connection devoted to carrying
    all the messages to be exchanged with the target MQTT server. As a
    first consequence, if another <code>MqttClient</code> object or any
    other generic external MQTT client connects to the same MQTT broker
    using an identical client identifier, the connection will be closed as
    per the <i>MQTT Protocol Specifications</i>.
     <p>
    A dedicated end-to-end connection guarantees full support of the
    following features:
    <ul>
      <li>QoS Levels 0,1, and 2</li>
      <li>persistence of the Session state</li>
      <li>Will Message</li>
    </ul>
    <p>
    Note that the MQTT&#46;Cool server does not take any
    active role in the management of the Session state, which is, on the
    contrary, maintained exclusively by the two ends of the connection: the
    MQTT broker and the <code>MqttClient</code> instance.
    <p>
    In a dedicated end-to-end connection, the life-cycle events relative to
    <code>MqttClient</code>, MQTT channel, and dedicated broker connection
    are tied together, namely:
    <ul>
      <li>A connection request initiated by <code>MqttClient</code> (which
        means a newly created MQTT channel) will be propagated up to the
        MQTT broker through the establishment of a new dedicated broker
        connection.
      </li>
      <li>A disconnection request initiated by <code>MqttClient</code>
        (which means the closure of the MQTT channel) will be propagated up
        to the MQTT broker, which in turn will close the dedicated broker
        connection.
      </li>
      <li>An interruption of the dedicated broker connection (due to any
        network issue or to a problem in the MQTT broker process) will be
        propagated back to <code>MqttClient</code>, which in turn will
        disconnect from MQTT.cool by closing the MQTT channel.
      </li>
      <li>An interruption of the MQTT&#46;Cool connection on
        the client side (due to any network issue or to an explicit
        <code>MQTTCoolSession</code> closing) will be propagated up to the
        MQTT broker by shutting down the dedicated broker connection.
      </li>
      <li>Any MQTT&#46;Cool server failure will cause
        interruption of both the dedicated broker connection on the server
        side and the MQTT&#46;Cool connection on the client
      </li>side.
    </ul>
    Note that any issue on the MQTT&#46;Cool connection
    detected on the client side will cause the <code>MqttClient</code>
    instance to try a reconnection (see
    <a href="MqttClient.html#onReconnectionStart">MqttClient#onReconnectionStart</a>).
  </li>
  <li><b>Shared End-to-End Connection</b>
    <p>
    A shared end-to-end connection is realized when
    MQTT&#46;Cool holds a single broker connection that will
    be shared among all those <code>MqttClient</code> instances (even
    hosted on different network locations) with the following common
    characteristics:
    <ol>
      <li>No client identifier has been passed at the time of creation from
        <code>MQTTCoolSession</code>.
      </li>
      <li>Connect to the same MQTT broker, along with identical username
        and password, if any.
      </li>
    </ol>
    <p>
    By exploiting this mechanism, MQTT&#46;Cool drastically
    reduces the number of newly created MQTT connections to the broker,
    with the purpose of optimizing the server side resources.
    <p>
    Futhermore, all the subscriptions to the same topic filter requested by
    the sharing clients will be logically merged into one single MQTT
    subscription, which is actually activated on the shared broker
    connection. This enables offloading the fan out to
    MQTT&#46;Cool, as it will be responsible for propagating
    messages flowing on the MQTT channel up to all subscribing clients.
    <p>
    The following constraints apply to shared connections:
    <ul>
      <li>QoS levels 1 and 2 are only partially supported.</li>
      <li>The <code>ClientId</code> cannot be specified explicitly; on the
        contrary, it will be generated by appending a random string to the
        <code>clientid_prefix</code> parameter to be configured in
        <code>mqtt_master_connector_conf.xml</code>.
      </li>
      <li>Session persistence is <b>not</b> supported, which means that the
        <code>Clean Session</code> flag must be set to <code>true</code>
        (or left unchanged).
      </li>
      <li>Will Message cannot be specified explicitly on the client side,
          but only globally and for all clients sharing a connection, once
          again through the <code>mqtt_master_connector_conf.xml</code>
          file.
      </li>
    </ul>
    <p>
    In a shared end-to-end connection, the life-cycle events relative to
    <code>MqttClient</code>, MQTT channel, and shared broker connection are
    only partially tied together, namely:
    <ul>
      <li>A connection request initiated by <code>MqttClient</code>
        implies that the newly created MQTT channel will be logically
        joined to an already active shared broker connection; the shared
        MQTT connection will be established only the very first time that
        an <code>MqttClient</code> instance connects to the broker.
      </li>
      <li>A disconnection request initiated by <code>MqttClient</code>
        (which means closure of the MQTT channel) will cause only a logical
        <i>detaching</i> from the shared broker connection, which will be
        closed gracefully (that is, via an explicit <code>DISCONNECT</code>
        Control Packet) only the very last time that an
        <code>MqttClient</code> instance disconnects from the broker.
      </li>
      <li>An interruption of the shared broker connection (due to any
        network issue or to a problem in the MQTT broker process) will be
        propagated back to all sharing <code>MqttClient</code> instances,
        which in turn will disconnect from MQTT&#46;Cool by
        closing the relative MQTT channels.
      </li>
      <li>An interruption of the MQTT&#46;Cool connection on
        the client side (due to any network issue or to an explicit
        <code>MQTTCoolSession</code> closing) will be managed by
        MQTT&#46;Cool as a logical detaching of all the
        engaged MQTT channels from the shared broker connection, which
        will be closed gracefully only when no more MQTT channels are
        attached.
      </li>
      <li>Any MQTT&#46;Cool server failure will cause the
        interruption of the shared broker connection on the server side a
        well as all the engaged MQTT.cool connections on the client side.
      </li>
    </ul>
    Note that any issue on the MQTT&#46;Cool connection
    detected on the client side will cause the <code>MqttClient</code>
    instance to try a reconnection (see
    <a href="MqttClient.html#onReconnectionStart">MqttClient#onReconnectionStart</a>).
  </li>
</ul></div>
        

        


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


        
    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        <dl>
            
<dt>
    <h4 class="name" id="onConnectionLost"><span class="type-signature"></span>onConnectionLost<span class="type-signature"> :<a href="global.html#OnConnectionLost">OnConnectionLost</a></span></h4>


</dt>
<dd>

<div class="description">
    The property to be bound to the callback function which will be invoked
when the end-to-end connection is lost.
<p>
The end-to-end connection is lost when one of the followings condition
occurs:
<ul>
  <li>A regular disconnection initiated on the client side, through
    invocation of the <a href="MqttClient.html#disconnect">MqttClient#disconnect</a> method.
  </li>
  <li>A disconnection from MQTT&#46;Cool triggered on the
    client side, through invocation of the <a href="MQTTCoolSession.html#close">MQTTCoolSession#close</a>
    method on the same <code>MQTTCoolSession</code> instance that
    originated this <code>MqttClient</code> object.
  </li>
  <li>An interruption of the broker connection.
  </li>
  <li>Stop of the reconnection attempts that follow an interruption of
    the MQTT&#46;Cool connection.
  </li>
</ul>
<p>
After losing the connection, the <code>MqttClient</code> instance
switches to the disconnected status, from which it would be possible to
start a new connection.
<p>
When setting this property, an Error is thrown if the provided value is
not of <code>function</code> type.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#OnConnectionLost">OnConnectionLost</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





</dd>

        
            
<dt>
    <h4 class="name" id="onMessageArrived"><span class="type-signature"></span>onMessageArrived<span class="type-signature"> :<a href="global.html#OnMessageArrived">OnMessageArrived</a></span></h4>


</dt>
<dd>

<div class="description">
    The property to be bound to the callback function invoked upon receiving
an Application Message sent by the MQTT broker.
<p>
An Application Message is sent by the MQTT broker to
MQTT&#46;Cool, which then forwards it to the
<code>MqttClient</code> instance after appropriate processing.
<p>
On the client side, the message handling is based on the following
factors:
<ul>
  <li>The QoS level at which the MQTT broker sends the message.</li>
  <li>The current end-to-end connection type (shared or dedicated).
  </li>
  <li>Whether the session is persistent, which is allowed only in the
    case of dedicated connection.
  </li>
</ul>
<p>
In particular:
<ul>
  <li>For a shared connection and a dedicated connection <b>without</b>
    session persistence, the invocation occurs when
    MQTT&#46;Cool forwards the message to the client as
    soon as the delivery of the Control Packets exchanged on the server
    side and relative to the
    <a href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html#_Toc398718099">delivery protocol</a>
    for the specified QoS level, has been completed.
    <p>
    Furthermore, for a shared connection the same message is forwarded to
    all the other <code>MqttClient</code> instances that share the
    broker connection and have subscribed to the same topic filter, even
    specifying a different QoS level. As consequence of this, it could be
    possible that the <a href="Message.html#qos">Message#qos</a> value of the received
    <code>Message</code> instance gets downgraded from the value actually
    granted by the MQTT broker because the sole existing subscription on
    the server side has been submitted with the maximum QoS level among
    the ones of the fanout subscriptions requested by the clients.
  </li>
  <li>For a dedicated connection <b>with</b> session persistence,
    invocation occurs in accordance with the flow of the Control Packets
    exchanged between <code>MqttClient</code> and the MQTT broker and
    relative to the aforementioned delivery protocol. More specifically:
    <ul>
      <li>Upon receiving a QoS 0 message, the callback is invoked
        immediately without any further elaboration.
      <li>Upon receiving a QoS 1 message, a <code>PUBACK</code> Control
        Packet is sent back and then the callback is invoked.
      </li>
      <li>Upon receiving a QoS 2 message, it is stored immediately and
        then a <code>PUBREC</code> Control Packet is sent back; upon
        receiving the <code>PUBREL</code> Control Packet, the message is
        finally removed from the local storage, the callback is invoked
        and then the <code>PUBCOMP</code> Control Packet is sent back.
      </li>
    </ul>
</ul>
<p>
When setting this property, an Error is thrown if the provided value is
not of <code>function</code> type.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#OnMessageArrived">OnMessageArrived</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





</dd>

        
            
<dt>
    <h4 class="name" id="onMessageDelivered"><span class="type-signature"></span>onMessageDelivered<span class="type-signature"> :<a href="global.html#OnMessageDelivered">OnMessageDelivered</a></span></h4>


</dt>
<dd>

<div class="description">
    The property to be bound to the callback function invoked when the
delivery process of an Application Message is complete.
<p>
An invocation of the <a href="MqttClient.html#send">MqttClient#send</a> method initiates the
delivery process, whose successful completion depends on the following
factors:
<ul>
  <li>The QoS level used to deliver the Application Message.</li>
  <li>The current end-to-end connection type (shared or dedicated).
  </li>
  <li>Whether the session is persistent, which is allowed only in the
    case of a dedicated connection.
  </li>
</ul>
<p>
In the case of QoS 0 message, the callback is invoked once the message
has been delivered to the underlying MQTT&#46;Cool channel
(irrespective of the connection type), and before any possible
authorization issue which could be raised when the message is actually
received by MQTT&#46;Cool (see
<a href="MqttClient.html#onMessageNotAuthorized">MqttClient#onMessageNotAuthorized</a>).
<p>
In the case of QoS > 0 message, the callback is invoked on the basis of
the connection type as follows:
<ul>
  <li>For a shared connection and a dedicated connection <b>without</b>
    session persistence, the invocation occurs when
    MQTT&#46;Cool sends back the acknowledgement that
    the flow of the Control Packets exchanged on the server side and
    relative to the
    <a href="http://docs.oasis-open.org/mqtt/mqtt/v3.1.1/os/mqtt-v3.1.1-os.html#_Toc398718099">delivery protocol</a>
    for the specified QoS level has been completed.
  </li>
  <li>For a dedicated connection <b>with</b> session persistence, the
    invocation occurs in accordance wih the flow of the Control Packets
    exchanged between <code>MqttClient</code> and the MQTT broker and
    relative to the aforementioned delivery protocol. More specifically:
    <ul>
      <li>For QoS 1 message, upon receiving the <code>PUBACK</code>
        Control Packet, the callback is invoked and then the message is
        removed from the local storage.
      </li>
      <li>For QoS 2 message, upon receiving the <code>PUBREC</code>
        Control Packet, the message state is updated on the local storage
        and then the <code>PUBREL</code> Control Packet is sent back;
        upon receiving the <code>PUBCOMP</code> Control Packet, the
        callback is invoked and then the message is finally removed from
        the local storage.
      </li>
    </ul>
  </li>
</ul>
<p>
Note that for QoS > 0 message, the callback will be never invoked in the
case of any authorization issue raised by the plugged Hook (see
<a href="MqttClient.html#onMessageNotAuthorized">MqttClient#onMessageNotAuthorized</a>). In such scenario, the message
is also removed from the local storage if session persistence is active.
<p>
When setting this property, an Error is thrown if the provided value is
not of <code>function</code> type.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#OnMessageDelivered">OnMessageDelivered</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





</dd>

        
            
<dt>
    <h4 class="name" id="onMessageNotAuthorized"><span class="type-signature"></span>onMessageNotAuthorized<span class="type-signature"> :<a href="global.html#OnMessageNotAuthorized">OnMessageNotAuthorized</a></span></h4>


</dt>
<dd>

<div class="description">
    The property to be bound to the callback function invoked when the
plugged Hook denies the authorization for publishing, or raises an issue
while performing its checking activities.
<p>
The authorization phase is triggered once the message received by
MQTT&#46;Cool is passed to the Hook, before being sent to
the target MQTT broker. In the case of authorization failure, the message
is rejected immediately and a specific error is sent back by
MQTT&#46;Cool to <code>MqttClient</code>. As consequence of
this, <a href="MqttClient.html#onMessageDelivered">MqttClient#onMessageDelivered</a> will never be called for this
message, unless its QoS value is <code>0</code>, which on the contrary
causes an instant invocation of the callback.
<p>
When setting this property, an Error is thrown if the provided value is
not of <code>function</code> type.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#OnMessageNotAuthorized">OnMessageNotAuthorized</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





</dd>

        
            
<dt>
    <h4 class="name" id="onReconnectionComplete"><span class="type-signature"></span>onReconnectionComplete<span class="type-signature"> :<a href="global.html#OnReconnectionComplete">OnReconnectionComplete</a></span></h4>


</dt>
<dd>

<div class="description">
    The property to be bound to the callback function invoked upon a
successful restoration of the end-to-end connection, which has been
interrupted because of an issue between <code>MqttClient</code> and
MQTT&#46;Cool.
<p>
More specifically, as soon as the underlying MQTT&#46;Cool
connection is restored, the <code>MqttClient</code> instance
and the MQTT&#46;Cool server cooperate silently in order to
fully restore the whole end-to-end connection, whereupon the session
state (as defined in <a href="MqttClient.html#onReconnectionStart">MqttClient#onReconnectionStart</a>) will be
resumed as follows:
<ul>
  <li>For a shared connection and a dedicated connection <b>without</b>
    session persistence:
    <ul>
      <li>All the active subscriptions will be resubmitted silently.</li>
      <li>Sent QoS 0 messages, not yet acknowledged by the
        MQTT&#46;Cool server, will be be redelivered,
        although the <a href="MqttClient.html#onMessageDelivered">MqttClient#onMessageDelivered</a> notification
        will no longer take place.
      </li>
      <li>Sent QoS > 0 messages, not yet acknowledged by the
        MQTT&#46;Cool server, will be redelivered; in this
        case, the flow of notification will prosecute as if the messages
        had been sent for the first time, which means that
        <a href="MqttClient.html#onMessageDelivered">MqttClient#onMessageDelivered</a> will be invoked as
        expected.
        <p>
        Furthermore, message redelivery triggered on the client
        side could cause duplicates because on the server side, the same
        message may be sent and acknowledged completely before the
        end-to-end is interrupted: this specific condition represents a
        concern in the case of QoS 2 messages as the MQTT Protocol
        Specifications do not allow duplicates.
      </li>
    </ul>
  </li>
  <li>For a dedicated connection <b>with</b> session persistence:
    <ul>
      <li>Sent QoS 0 messages, not yet acknowledged by the
        MQTT&#46;Cool server, will be redelivered, although
        the <a href="MqttClient.html#onMessageDelivered">MqttClient#onMessageDelivered</a> notification will no
        longer take place.
      </li>
      <li>Sent QoS 1 and 2 messages, not yet completely acknowledged,
        will be reprocessed as per the reached level of acknowledgement.
      </li>
      <li>Received QoS 2 messages, not yet completely acknowledged to the
        MQTT broker, will be reprocessed as per the reached level of
        acknowledgement.
      </li>
    </ul>
  </li>
</ul>
<p>
When setting this property, an Error is thrown if the provided value is
not of <code>function</code> type.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#OnReconnectionComplete">OnReconnectionComplete</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





</dd>

        
            
<dt>
    <h4 class="name" id="onReconnectionStart"><span class="type-signature"></span>onReconnectionStart<span class="type-signature"> :<a href="global.html#OnReconnectionStart">OnReconnectionStart</a></span></h4>


</dt>
<dd>

<div class="description">
    The property to be bound to the callback function invoked when an attempt
to re-establish the current end-to-end connection, which has been
interrupted because of an issue between <code>MqttClient</code> and
MQTT&#46;Cool, has started.
<p>
More specifically, the callback is called in case of interruption of
the underlying MQTT&#46;Cool connection (due to network
issue or to problems in the MQTT&#46;Cool server process)
while the <code>MqttClient</code> instance is currently in the connected
status. If the connection was interrupted just before
<code>MqttClient</code> connects through the <a href="MqttClient.html#connect">MqttClient#connect</a>
method, then a connection failure will be immediately triggered: see
<a href="global.html#OnConnectionFailure">OnConnectionFailure</a>, <code>errorCode=10</code>.
<p>
The provided <i>reconnection</i> feature allows to try to transparently
re-establish the connection to the MQTT&#46;Cool server
while also preserving the current <i>session state</i>, which could be
resumed once the connection has been restored.<br/>
<p>
The session state depends on the current end-to-end connection type:
<ul>
  <li>For a shared connection and a dedicated connection <b>without</b>
    session persistence, the session state consists of:
    <ol>
      <li>All messages sent to the MQTT broker, but not yet acknowledged
        by the MQTT&#46;Cool server.
      </li>
      <li>All the current active subscriptions.</li>
    </ol>
  </li>
  <li>For a dedicated connection <b>with</b> session persistence, the
    session state consists of:
    <ol>
      <li>QoS 0 messages sent to the MQTT broker, but not yet
        acknowledged by the MQTT&#46;Cool server.
      </li>
      <li>QoS 1 and QoS 2 messages sent to the MQTT broker, but not
        completely acknowledged.
      </li>
      <li>QoS 2 messages received from the MQTT broker, but not
        completely acknowledged.
      </li>
    </ol>
    Note that points 2 and 3 are compliant with the definition of
    <i>Session state in the Client</i> as stated in the MQTT Protocol
    Specifications; instead, point 1 goes beyond such definition as no
    recovery action is normally required for QoS 0 messages.
  </li>
</ul>
<p>
The callback will be invoked indefinitely until one of the following
events occurs:
<ul>
  <li>The underlying MQTT&#46;Cool connection has been
    restored.
  </li>
  <li>An explicit invocation of the <a href="MqttClient.html#disconnect">MqttClient#disconnect</a>
    method has been performed in the body of the provided callback
    (recommended way to stop definitively any reconnection attempt).
  </li>
</ul>
The latter point also implies that there will not be any further chances
to resume the state of <code>MqttClient</code> that is without a
persistent session.
<p>
When setting this property, an Error is thrown if the provided value is
not of <code>function</code> type.
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type"><a href="global.html#OnReconnectionStart">OnReconnectionStart</a></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





</dd>

        </dl>
    

    
        <h3 class="subsection-title">Method Summary</h3>
        
        <dl>
          


  <dt>
    <span class="signature"><a href="MqttClient.html#connect" class="connect">connect</a><span class="signature">
  </dt>
  
      <dd class="summary">Opens an end-to-end connection to the target MQTT broker.</dd>
  
  
 
        
          


  <dt>
    <span class="signature"><a href="MqttClient.html#disconnect" class="disconnect">disconnect</a><span class="signature">
  </dt>
  
      <dd class="summary">Disconnects from the target MQTT broker.</dd>
  
  
 
        
          


  <dt>
    <span class="signature"><a href="MqttClient.html#send" class="send">send</a><span class="signature">
  </dt>
  
      <dd class="summary">Sends an Application Message to be published to a topic.</dd>
  
  
 
        
          


  <dt>
    <span class="signature"><a href="MqttClient.html#subscribe" class="subscribe">subscribe</a><span class="signature">
  </dt>
  
      <dd class="summary">Subscribes to the topic(s) indicated by the given
<code>topicFilter</code>.</dd>
  
  
 
        
          


  <dt>
    <span class="signature"><a href="MqttClient.html#unsubscribe" class="unsubscribe">unsubscribe</a><span class="signature">
  </dt>
  
      <dd class="summary">Unsubscribes from the topic(s) indicated by the given <code>topicFilter
</code>.</dd>
  
  
 
        </dl>
    
    
        
    
    
        <h3 class="subsection-title">Method Detail</h3>
        <dl>
            
<dt>


    <h4 class="name" id="connect"><span class="type-signature"></span>connect<span class="signature">(connectOptions<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

</dt>
<dd>


<div class="description">
    Opens an end-to-end connection to the target MQTT broker.
<p>
The ways through which the connection to the broker has to be
established have been specified by the parameters supplied to the
<a href="MQTTCoolSession.html#createClient">MQTTCoolSession#createClient</a> method, which is invoked to create
this <code>MqttClient</code> instance.<br/>
Upon successful acknowledgement of the connection request (notified
through the <a href="global.html#OnConnectionSuccess">OnConnectionSuccess</a> callback if properly set)
the <code>MqttClient</code> instance switches to the connected status.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Argument</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>connectOptions</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#ConnectOptions">ConnectOptions</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The object whose properties
  specify the options to be used for controlling the connection to the
  target MQTT broker. If not supplied (or <code>null</code>), then its
  default values apply.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>











<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If <code>MqttClient</code> is currently in the connected
  status or the provided argument is invalid.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    





        
            
<dt>


    <h4 class="name" id="disconnect"><span class="type-signature"></span>disconnect<span class="signature">()</span><span class="type-signature"></span></h4>

</dt>
<dd>


<div class="description">
    Disconnects from the target MQTT broker.
<p>
After sending the <code>DISCONNECT</code> Control Packet,
<code>MqttClient</code> immediately switches to the disconnected status
and closes the underlying MQTT channel, which provokes
<a href="MqttClient.html#onConnectionLost">MqttClient#onConnectionLost</a> to be fired.<br/>
The MQTT&#46;Cool connection remains up as it may serve the
MQTT channels owned by the other connected <code>MqttClient</code>
objects that share the same parent <a href="MQTTCoolSession.html">MQTTCoolSession</a> instance.
<p>
Note that from the disconnected status, an <code>MqttClient</code> is
allowed to open a new connection through the <a href="MqttClient.html#connect">MqttClient#connect</a>
method.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>











<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If <code>MqttClient</code> is currently in the
  disconnected status.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    





        
            
<dt>


    <h4 class="name" id="send"><span class="type-signature"></span>send<span class="signature">(topic<span class="signature-attributes">non-null</span>, payload<span class="signature-attributes">opt, non-null</span>, qos<span class="signature-attributes">opt</span>, retained<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

</dt>
<dd>


<div class="description">
    Sends an Application Message to be published to a topic.
<p>
The method can be used in two different ways, on the basis of the number
and the type of the provided arguments:
<ul>
  <li>Single Argument Form</li>
  The method takes just one argument, which is a <a href="Message.html">Message</a> instance
  wrapping the Application Message (and related details) to be published.
  <br/>
  For example:
  <pre>
  // Prepare the Message instance
  var msg = new Message('My Message!')
  msg.destinationName = 'my/topic';
  msg.qos = 1;
  msg.retained = false;

  // Send the prepared message (client is an already connected MqttClient object).
  client.send(msg);
  </pre>

  <li>Multiple Arguments Form</li>
  The method takes up to four arguments that specify the Application
  Message (and the related details) to be published.<br/>
  For example:
  <pre>
  // Send the message specified by means of the provided arguments.
  client.send('my/topic', 'My Message!', 1, false);
  </pre>
</ui>
Note also that it is not allowed to provide arguments in a mixed form; if
this is the case, then an exception will be thrown.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Argument</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>topic</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type"><a href="Message.html">Message</a></span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">In the case of a <a href="Message.html">Message</a>
  instance, the Application Message (and related details) to be
  published.
  <p>
  In the case of a <code>string</code> value, the name of the topic to
  which the Application Message is to be published as specified in
  <a href="Message.html#destinationName">Message#destinationName</a>.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>payload</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">ArrayBuffer</span>
|

<span class="param-type">Int8Array</span>
|

<span class="param-type">Uint8Array</span>
|

<span class="param-type">Int16Array</span>
|

<span class="param-type">Uint16Array</span>
|

<span class="param-type">Int32Array</span>
|

<span class="param-type">Uint32Array</span>
|

<span class="param-type">Float32Array</span>
|

<span class="param-type">Float64Array</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The
  payload of the Application Message, as it was provided to the
  <a href="Message.html">Message</a> constructor.
  <p>
  Note that in the case of <i>Multiple arguments</i>, this parameter is
  <b>mandatory</b>.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>qos</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    0
                
                </td>
            

            <td class="description last">The Quality of Service level for delivery of the
  Application Message as specified in <a href="Message.html#qos">Message#qos</a>.
  <p>
  Note that any provided value different from <code>0</code>,
  <code>1</code> and <code>2</code> will provoke an exception.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>retained</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    false
                
                </td>
            

            <td class="description last">The retained flag as specified in
  <a href="Message.html#retained">Message#retained</a>.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>











<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        if <code>MqttClient</code> is currently in the
  disconnected status or the provided arguments are invalid.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    





        
            
<dt>


    <h4 class="name" id="subscribe"><span class="type-signature"></span>subscribe<span class="signature">(topicFilter, subscribeOptions<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

</dt>
<dd>


<div class="description">
    Subscribes to the topic(s) indicated by the given
<code>topicFilter</code>.
<p>
Because the provided <code>topicFiler</code> may contain
<i>wildcards</i>, it allows to subscribe to multiple topics at once.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Argument</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>topicFilter</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The topic filter, which indicates one or
  more topics to subscribe to.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>subscribeOptions</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#SubscribeOptions">SubscribeOptions</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The object whose properties
  specify the options to be used for controlling the subscription. If not
  supplied (or <code>null</code>), then its default values apply.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>











<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If <code>MqttClient</code> is currently in the
  disconnected status or the provided arguments are invalid.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    





        
            
<dt>


    <h4 class="name" id="unsubscribe"><span class="type-signature"></span>unsubscribe<span class="signature">(topicFilter, unsubscribeOptions<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

</dt>
<dd>


<div class="description">
    Unsubscribes from the topic(s) indicated by the given <code>topicFilter
</code>.
<p>
Because the provided <code>topicFiler</code> may contain
<i>wildcards</i>, it can allow unsubscriptions from multiple topics at
once.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Argument</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>topicFilter</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            

            <td class="description last">The topic filter, which indicates one or
  more topics to unsubscribe from.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>unsubscribeOptions</code></td>
            

            <td class="type">
            
                
<span class="param-type"><a href="global.html#UnsubscribeOptions">UnsubscribeOptions</a></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The object whose
  properties specify the options to be used for controlling the
  unsubscription.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>











<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If <code>MqttClient</code> is in the disconnected status
  or the provided arguments are invalid.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    





        </dl>
    
    
    

    
</article>

</section>




</div>

<nav>
    <a href="https://mqtt.cool"><img src="logo.svg"/></a><h2><a href="index.html">Home</a> | <a href="index-all.html">Index</a></h2><h3>Externals</h3><ul><li class="signature"><a href="external-LightstreamerClient.html">LightstreamerClient</a></li></ul><h3>Classes</h3><ul><li class="signature"><a href="Message.html">Message</a></li></ul><h3>Interfaces</h3><ul><li class="signature"><a href="MqttClient.html">MqttClient</a></li><li class="signature"><a href="MQTTCoolListener.html">MQTTCoolListener</a></li><li class="signature"><a href="MQTTCoolSession.html">MQTTCoolSession</a></li><li class="signature"><a href="MqttStorage.html">MqttStorage</a></li></ul><h3>Global</h3><ul><li><a href="global.html#openSession">openSession</a></li></ul>
</nav>

<br clear="both">

<footer>
    <div class="footer_text">MQTT&#46;Cool Node.js Client 2.0.0-alpha API Reference
      <div class="jsdoc_ctime">
         Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Mon Oct 18 2021 15:46:07 GMT+0200 (Central European Summer Time)
      </div>
    </div>
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>