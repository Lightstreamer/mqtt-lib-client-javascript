define("LightstreamerMQTT",[],function(){var e={toString:function(){return"[MQTT.Cool "+this.library+" client version "+this.version+" build "+this.build+"]"}};"undefined"!==typeof e;e.library="nodejs";e.version="1.2.5";e.build="215";return e});
define("Objects",["LoggerManager"],function(e){var c=e.getLoggerProxy("mqtt.cool"),a={b:function(b,a,p){c.debug("Invoking \x3c"+a+"\x3e on ["+b+"] object");var e=b[a];if(e)try{return"undefined"!=typeof p?e.apply(b,p):e.apply(b)}catch(q){var m=q;c.error("Exception ["+q+"] while invoking \x3c"+a+"\x3e on ["+b+"] object");throw Error(q);}finally{m||c.debug("\x3c"+a+"\x3e successfully invoked.")}},Pc:function(b){if(void 0!==Object.keys)return 0===Object.keys(b).length;for(var a in b)if(b.hasOwnProperty(a))return!1;
return!0},h:function(b,a,c,e){if(null==b){if(e)return;a="Invalid ["+c+"] value: ";throw Error(null===b?a+"null":a+"undefined");}if(typeof b!==a)throw Error("Invalid ["+c+"] value: "+b);},ka:function(b,l,c,e,m){a.h(b,l,c,m);e[c]=b},Ad:function(b,a){b.forEach(function(b){var c=a[b],e=typeof c;if(null!=c&&"undefined"!==e&&"function"!==e)throw Error("Invalid ["+b+"] value: "+c);})},R:function(b,a,c){a=a?" ["+a+"] ":" ";if("string"===typeof b){try{var e=encodeURIComponent(b)}catch(m){throw Error("Argument"+
a+"not encodable as UTF-8 string");}b=65535;"undefined"!=typeof c&&(b=c);if(e.length>b)throw Error("Argument"+a+"exceeded max length: \x3c"+e.length+"\x3e");return e}throw Error("Invalid"+a+"argument: \x3c"+b+"\x3e");},Qc:function(b,a){return{code:b,message:a||""}},O:function(b,a){var c={errorCode:b};"undefined"!==typeof a&&null!=a&&(c.errorMessage=a);return c}};a.checkType=a.h;a.checkTypeAndSet=a.ka;a.checkUTF8=a.R;a.invoke=a.b;a.makeEvent=a.Qc;a.makeErrorEvent=a.O;return a});
define("Errors",["Objects"],function(e){var c=e.O,a={Bb:{code:-1,A:"UNAUTHORIZED_SESSION"},yb:{code:-2,A:"BROKER_CONFIGURATION_NOT_VALID",P:c(9,"MQTT broker configuration not valid")},Ua:{code:-3,A:"UNAUTHORIZED_CONNECTION"},Va:{code:-4,A:"UNAUTHORIZED_PUBLISHING"},Wa:{code:-5,A:"UNAUTHORIZED_SUBSCRIPTION"},La:{code:-6,A:"CONFLICTING_SELECTOR"},da:{code:100,A:"SERVER_ERROR"},ra:{code:-10,A:"BROKER_CONNECTION_REFUSED"},Ta:{code:-11,A:"SUCCESSFUL_DISCONNECTION",P:c(0,"Successful disconnection")},sa:{code:-12,
A:"MQTTCOOL_CONNECTION_ERROR",P:c(10,"Connection error to MQTT.Cool")},Na:{code:-13,A:"MQTT_BROKER_CONNECTION_ERROR",P:c(11,"Connection error to the MQTT broker")},ta:{code:-14,A:"MQTTCOOL_DISCONNECTION",P:c(12,"Disconnection from MQTT.Cool")}};return{l:a,Oc:{"-1":a.Bb,"-2":a.yb,"-3":a.Ua,"-4":a.Va,"-5":a.Wa,"-6":a.La,"-10":a.ra,"-11":a.Ta,"-12":a.sa,"-13":a.Na,"-14":a.ta},la:function(b){return 0<b?a.da:this.Oc[String(b)]},aa:function(b){if(b)return b=JSON.parse(b),c(b.code,b.message)}}});
define("Message",["Objects"],function(e){function c(a){this.Y=null;if("string"===typeof a){var b=new ArrayBuffer(a.length);this.Y=new Uint8Array(b);for(b=0;b<a.length;b++)this.Y[b]=a.charCodeAt(b)}else if(a instanceof ArrayBuffer||a instanceof Int8Array||a instanceof Uint8Array||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)this.Y=a;else throw Error("Invalid [payload] argument");this.Ya=void 0;
this.jb=this.Za=!1;this.ib=0}c.prototype={Jc:function(){return this.Y},Kc:function(){return String.fromCharCode.apply(null,new Uint8Array(this.Y.buffer))},Gc:function(){return this.Ya},vd:function(a){if(0==e.R(a,"destinationName").length)throw Error("Argument [destinationName] must be at least one character long");if(-1!=a.indexOf("#")||-1!=a.indexOf("+"))throw Error("Argument [destinationName] cannot contain wildcard characters");this.Ya=a},xb:function(a){e.h(a,"boolean","duplicate");this.Za=a},
Hc:function(){return this.Za},Mc:function(){return this.jb},xd:function(a){e.h(a,"boolean","retained");this.jb=a},Lc:function(){return this.ib},wd:function(a){if("number"===typeof a&&0<=a&&2>=a)this.ib=a;else throw Error("Invalid [qos] argument");}};c.prototype._setDuplicate=c.prototype.xb;Object.defineProperties(c.prototype,{duplicate:{get:c.prototype.Hc},retained:{get:c.prototype.Mc,set:c.prototype.xd},qos:{get:c.prototype.Lc,set:c.prototype.wd},destinationName:{get:c.prototype.Gc,set:c.prototype.vd},
payloadBytes:{get:c.prototype.Jc},payloadString:{get:c.prototype.Kc}});return c});
define("Env",[],function(){var e="object"==typeof process&&(/node(\.exe)?$/.test(process.execPath)||process.node&&process.v8||process.versions&&process.versions.node&&process.versions.v8),c={S:function(){return e},lb:function(a){return this.S()?(new Buffer(a,"base64")).toString():atob(a)},Ea:function(a){return this.S()?(new Buffer(a)).toString("base64"):btoa(a)}};c.isNodeJs=c.S;c.decodeFromBase64=c.lb;c.encodeToBase64=c.Ea;return c});
define("Json",["Message","Env"],function(e,c){var a={Da:function(b){for(var a=c.lb(b.payload),p=new Uint8Array(a.length),n=0;n<a.length;n++)p[n]=a.charCodeAt(n);a=new e(p);a.destinationName=b.destinationName;a.qos=parseInt(b.qos,10)||0;a.retained=b.retained||!1;a.xb(b.duplicate||!1);return a},mb:function(a){return{payload:c.Ea(a.payloadString),destinationName:a.destinationName,qos:a.qos,retained:a.retained,duplicate:a.duplicate}}};a.decodeMessageFromJson=a.Da;a.encodeMessageToJson=a.mb;return a});
define("DefaultStorage",["Env"],function(e){function c(){return window.localStorage}if(!e.S())return e=function(){},e.prototype={set:function(a,b){c().setItem(a,b)},get:function(a){return c().getItem(a)},remove:function(a){c().removeItem(a)},keys:function(){return Object.keys(c())},Ca:function(){c().clear()}},e.prototype.set=e.prototype.set,e.prototype.get=e.prototype.get,e.prototype.remove=e.prototype.remove,e.prototype.keys=e.prototype.keys,e.prototype.clearAll=e.prototype.Ca,e});
define("Store",["DefaultStorage","LoggerManager"],function(e,c){function a(){this.sc=0;this.za=null;this.V=!1;this.L=null}var b=c.getLoggerProxy("mqtt.cool.store");a.u={SENT:"S",RECEIVED:"R"};a.prototype={xa:function(c,e){b.logDebug("Making a store key from packetId and state:",c,e);for(var n in a.u)if(e==a.u[n])return this.za+"_"+e+"_"+c;b.logError("Supplied state is not valid",e);throw Error("Invalid [state]: "+e);},$a:function(a){this.ua().forEach(function(b){a.apply(this,[b])},this)},ua:function(){return this.L.keys().filter(function(a){return 0==
a.indexOf(this.za)},this)},open:function(a,c,n){b.logDebug("Opening the store:",a,c);if(!a)throw b.logError("Invalid clientId:",a),Error("Invalid \x3cclientId\x3e argument: "+a);if(!c)throw b.logError("Invalid brokerAlias:",c),Error("Invalid \x3cbrokerAlias\x3e argument: "+c);this.za=c+"_"+a;n?(b.logDebug("A custom MqttStorage implementation has been supplied"),this.L=n):(b.logDebug("Setting up default MqttStorage implementation"),this.L=new e);var m;a=this.L;try{a.set("__storage_test__","__storage_test__");
var q=a.keys();b.logDebug("Key size:",q.length);if("__storage_test__"!==a.get("__storage_test__"))throw Error("Assertion failed upon checking MqttStorage.getItem()");a.remove("__storage_test__");m=!0}catch(v){b.logError(v),m=!1}this.V=m;b.logInfo(this.V?"Store opened":"Store is not available");return this.V},qa:function(a,c,e){var m=this.xa(a.packetId,c);c={seq:++this.sc,state:c,pubrecReceived:e||!1,body:a};c=JSON.stringify(c);b.logDebug("Stringified item to be stored:",c);try{this.L.set(m,c),b.logDebug("Item stored with key:",
m)}catch(q){throw b.logError(q),Error("The following error occurred while writing into the store: "+q);}b.logInfo("Stored packet body:",a);return m},Ia:function(a){try{var b=this.L.get(a);return b?JSON.parse(b):null}catch(c){throw Error("The following error occurred while reading from the store: "+c);}},Ob:function(a,b){var c=this.xa(a,b);return this.Ia(c)},remove:function(a,b){var c=this.xa(a,b);try{this.L.remove(c)}catch(e){throw Error("The following error occurred while removing from the store: "+
e);}},vb:function(a,b,c){if(this.V){var e=this.ua().map(function(a){return this.Ia(a)},this).sort(function(a,b){return a.seq-b.seq});e.forEach(function(b){a.apply(c,[b])});0<e.length&&b&&b.apply(c,[])}},size:function(){var a=0;this.$a(function(){a++});return a},clear:function(){this.V&&this.$a(function(a){this.L.remove(a)})}};a.ITEM_STATE=a.u;a.prototype.open=a.prototype.open;a.prototype.store=a.prototype.qa;a.prototype.retrieve=a.prototype.Ia;a.prototype._allKeys=a.prototype.ua;a.prototype._getByPacketIdAndState=
a.prototype.Ob;a.prototype.remove=a.prototype.remove;a.prototype.size=a.prototype.size;a.prototype.processInOrder=a.prototype.vb;a.prototype.clear=a.prototype.clear;return a});
define("MqttSubscribeOptions",["Objects"],function(e){function c(b){this.M={qos:0,maxFrequency:"unlimited"};for(var c in b)a[c]&&e.ka(b[c],a[c].type,c,this.M,a[c].nullable);b=this.M.qos;if(0!==b&&1!==b&&2!==b)throw Error("Invalid [QoS] value: "+b);b=this.M.maxFrequency;if("number"==typeof b&&0>=b)throw Error("maxFrequency must be a positive number: "+b);}var a={qos:{type:"number"},maxFrequency:{type:"number"},onSuccess:{type:"function",nullable:!0},onFailure:{type:"function",nullable:!0},onNotAuthorized:{type:"function",
nullable:!0}};c.prototype={ma:function(){return this.M.qos},getRequestedMaxFrequency:function(){return this.M.maxFrequency},B:function(a){e.b(this.M,"onSuccess",[{grantedQos:a}])},D:function(a){e.b(this.M,"onFailure",[e.O(a)])},U:function(a){e.b(this.M,"onNotAuthorized",[a])}};c.prototype.getQoS=c.prototype.ma;c.prototype.getRequestedMaxFrequency=c.prototype.getRequestedMaxFrequency;c.prototype.onSuccess=c.prototype.B;c.prototype.onFailure=c.prototype.D;c.prototype.onNotAuthorized=c.prototype.U;return c});
define("MqttUnsubscribeOptions",["Objects"],function(e){function c(b){this.Ba=b||{};for(var c in b)a[c]&&e.ka(b[c],a[c].type,c,this.Ba,a[c].nullable)}var a={onSuccess:{type:"function",nullable:"true"},onFailure:{type:"function",nullable:"true"}};c.prototype={B:function(){e.b(this.Ba,"onSuccess")},D:function(a){e.b(this.Ba,"onFailure",[a])}};c.prototype.onSuccess=c.prototype.B;c.prototype.onFailure=c.prototype.D;return c});
define("MqttConnectOptions",["Objects","LoggerManager"],function(e,c){function a(a){this.m={cleanSession:!0};for(var b in a)l[b]&&e.ka(a[b],l[b].type,b,this.m,l[b].nullable);this.m.storePath=this.m.storePath||"mqttcool-storage";if((a=this.m.willMessage)&&!a.destinationName)throw Error("Invalid [destinationName] value for [willMessage]: "+a.destinationName);}var b=c.getLoggerProxy("mqtt.cool"),l={username:{type:"string",nullable:!0},password:{type:"string",nullable:!0},cleanSession:{type:"boolean"},
willMessage:{type:"object",nullable:!0},storage:{type:"object",nullable:!0},storePath:{type:"string",nullable:!0},onSuccess:{type:"function",nullable:!0},onFailure:{type:"function",nullable:!0},onNotAuthorized:{type:"function",nullable:!0}};a.prototype={ob:function(){return this.m.username},nb:function(){return this.m.password},C:function(){return this.m.cleanSession},oa:function(){return this.m.willMessage},na:function(){return this.m.storage},Nc:function(){return this.m.storePath},B:function(){this.wa("Invoking onSuccess");
e.b(this.m,"onSuccess")},D:function(a){this.wa("Invoking onFailure with: ",a);e.b(this.m,"onFailure",[a])},U:function(a){this.wa("Invoking onNotAuthorized with: ",a);e.b(this.m,"onNotAuthorized",[a])},wa:function(a,c){b.debug("MqttConnectionOptions."+a+JSON.stringify(c||""))},yd:function(){return JSON.stringify(this.m)}};a.prototype.getUsername=a.prototype.ob;a.prototype.getPassword=a.prototype.nb;a.prototype.getCleanSession=a.prototype.C;a.prototype.getWillMessage=a.prototype.oa;a.prototype.getStorage=
a.prototype.na;a.prototype.getStorePath=a.prototype.Nc;a.prototype.onSuccess=a.prototype.B;a.prototype.onFailure=a.prototype.D;a.prototype.onNotAuthorized=a.prototype.U;return a});
define("MqttClientImpl","LightstreamerClient Subscription LoggerManager Objects Errors Json Env Store Message MqttSubscribeOptions MqttUnsubscribeOptions MqttConnectOptions".split(" "),function(e,c,a,b,l,p,n,m,q,v,y,z){function g(d,a,b){f.debug("Creating a new instance of MqttClient");this.va=d;this.G=a;this.j=b;this.c=new t;this.fb=this.eb=this.cb=this.gb=this.hb=this.bb=this.kb=null;this.ab();f.logInfo("New MqttClient instance created:",this.G)}function t(d){this.a=d}function h(d,a){this.body=d;
this.T=!1;this.pb=!0;this.pa="undefined"!=typeof a?a:!1;this.aborted=this.processed=0}function u(d){return"undefined"==typeof d||null==d?"#":d?b.R(d):"$"}var f=a.getLoggerProxy("mqtt.cool"),r=0,k={DISCONNECTED:0,CONNECTING:1,CONNECTED:2,RETRY:3,RECOVERY:4,DISCONNECTING:5,N:function(d){for(var a in k)if(k[a]==d)return a}},A={0:"Connection Accepted",1:"Connection Refused: unacceptable protocol version",2:"Connection Refused: identifier rejected",3:"Connection Refused: server unavailable",4:"Connection Refused: bad user name or password",
5:"Connection Refused: not authorized"};h.g={zd:"CONNECT",Ma:"CONNACK",zb:"DISCONNECT",Sa:"SUBSCRIBE",Xa:"UNSUBSCRIBE",Ab:"SUBACK",Cb:"UNSUBACK",ca:"PUBLISH",Oa:"PUBACK",Ra:"PUBREL",Qa:"PUBREC",Pa:"PUBCOMP"};h.Rc=function(){return new h({type:h.g.zb},!1)};h.Uc=function(d){return new h({type:h.g.ca,packetId:null,message:p.mb(d)})};h.Sc=function(d){return new h({type:h.g.Oa,packetId:d},!1)};h.Vc=function(d){return new h({type:h.g.Qa,packetId:d},!1)};h.rb=function(d,a){var b={type:h.g.Ra,packetId:d};
"undefined"!==typeof a&&(b.restored=a);return new h(b,!1)};h.Tc=function(d){return new h({type:h.g.Pa,packetId:d},!1)};h.sb=function(d,a,b,c){d=new h({type:h.g.Sa,packetId:d,topicFilter:a,qos:b},!0);d.options=c;return d};h.Wc=function(d,a,b,c){d=new h({type:h.g.Xa,packetId:d,topicFilter:a},!0);d.options=b;d.sourceSubPacket=c;return d};h.prototype={Ic:function(d){return JSON.stringify({connectionId:d,packet:this.body})},getStatus:function(){return JSON.stringify({type:this.body.type,packetId:this.body.packetId,
processed:this.processed,aborted:this.aborted,notified:this.T})},B:function(){},D:function(){}};t.prototype={Xc:function(d){this.a&&b.b(this.a,"onConnAckReceived",[d])},qd:function(d){this.a&&b.b(this.a,"onSubscribe",[d])},pd:function(d,a){this.a&&b.b(this.a,"onSubAckReceived",[d,a])},od:function(d,a){this.a&&b.b(this.a,"onSubAckProcessed",[d,a])},ld:function(d){this.a&&b.b(this.a,"onSharedSubscription",[d])},nd:function(d,a){this.a&&b.b(this.a,"onSharedSubscriptionAckReceived",[d,a])},md:function(d,
a){this.a&&b.b(this.a,"onSharedSubscriptionAckProcessed",[d,a])},tb:function(d){this.a&&b.b(this.a,"onSharedUnsubscription",[d])},td:function(d){this.a&&b.b(this.a,"onUnsubscribe",[d])},sd:function(d){this.a&&b.b(this.a,"onUnsubAckReceived",[d])},rd:function(d){this.a&&b.b(this.a,"onUnsubAckProcessed",[d])},kd:function(d){this.a&&b.b(this.a,"onPublishReceived",[d])},jd:function(d){this.a&&b.b(this.a,"onPublishProcessed",[d])},ad:function(d){this.a&&b.b(this.a,"onPubAckReceived",[d])},$c:function(d){this.a&&
b.b(this.a,"onPubAckProcessed",[d])},ed:function(d,a){this.a&&"function"==typeof this.a.onPubRecReceived?b.b(this.a,"onPubRecReceived",[d,a]):a()},dd:function(d){this.a&&b.b(this.a,"onPubRecProcessed",[d])},gd:function(d){this.a&&b.b(this.a,"onPubRelReceived",[d])},fd:function(d){this.a&&b.b(this.a,"onPubRelProcessed",[d])},cd:function(d){this.a&&b.b(this.a,"onPubCompReceived",[d])},bd:function(d){this.a&&b.b(this.a,"onPubCompProcessed",[d])},Dc:function(d){this.a&&b.b(this.a,"beforePublishing",[d])},
hd:function(d){this.a&&b.b(this.a,"onPublish",[d])},Zc:function(d){this.a&&b.b(this.a,"onDeliveryCompleteReceived",[d])},Yc:function(d){this.a&&b.b(this.a,"onDeliveryCompleteProcessed",[d])}};g.prototype={Pb:function(){return this.G},Qb:function(){return this.o},bc:function(){return this.w},Nb:function(){return this.va},ac:function(){return this.f},W:function(){var d=this.o.C()?"1":"0";return[this.va,u(this.o.ob()),u(this.o.nb()),d,this.G,this.$].join("|")},oc:function(){if(0<this.s.length)return this.s[this.s.length-
1]},Sb:function(){return this.s.length},Rb:function(){return this.s},$b:function(){return this.i},Zb:function(){return this.Z},Mb:function(){return this.F},Lb:function(){return this.v},Ac:function(d){this.c=new t(d)},Bc:function(d){this.kb=d},fa:function(){if(this.f==k.DISCONNECTED||this.f==k.DISCONNECTING)throw f.logError("Invalid state:",k.N(this.f)),Error("Invalid state");},disconnect:function(){this.fa();if(this.f==k.RETRY||this.f==k.RECOVERY)f.debug("Disconnect invoked forcibly while trying to recover the connection, stopping"),
this.I(l.l.sa);else if(this.f==k.CONNECTING)f.debug("Disconnect invoked forcibly while connecting, stopping"),this.I(l.l.ta);else{this.f=k.DISCONNECTING;var d=this,a=h.Rc();a.Ha=function(){setTimeout(function(){d.I(l.l.Ta)},0)};a.ub=a.Ha;this.J(a);f.debug("DISCONNECT packet scheduled for delivery")}},subscribe:function(d,a){var c=0;a&&(c=a.qos||c);f.debug("Subscribing to topicFilter \x3c"+d+"\x3e with QoS \x3c"+c+"\x3e");this.fa();b.R(d,"topicFilter");c=new v(a);this.Jb(d,c);f.info("Subscription scheduled for being sent to MQTT.Cool")},
unsubscribe:function(d,a){this.fa();b.R(d,"topicFilter");var c=new y(a);this.Kb(d,c)},send:function(d,a,b,c){f.logDebug("Sending a message");this.fa();var e=null;if(0==arguments.length)throw f.error("Invalid arguments length"),Error("Invalid arguments length");if(1==arguments.length){f.debug("Passed one parameter only, checking if is of right type");if(!(d instanceof q))throw Error("Invalid argument");f.debug("The passed parameter is a Message");e=d;if(!e.destinationName)throw Error("Invalid [destinationName] argument");
}else f.debug("Passed "+arguments.length+" parameters, building a Message instance"),e=new q(a),e.destinationName=d,3<=arguments.length&&(e.qos=b),4<=arguments.length&&(e.retained=c),f.debug("Message instance built");this.Gb(e);f.info("Message scheduled for being sent to MQTT.Cool")},connect:function(d){f.debug("Connecting to the MQTT broker through the MQTT.Cool...");if(this.f!=k.DISCONNECTED)throw f.logError("Invalid state:",k.N(this.f)),Error("Invalid state");d=new z(d);f.isDebugLogEnabled()&&
f.logDebug("Connection Options built:",d.yd());if(this.G){f.debug("Opening the store");var a=new m,b=a.open(this.va,this.G,d.na());b?(this.w=a,f.debug("The store is enabled")):f.warn("The store is NOT enabled");if(!d.C()&&!b)throw Error("No Local Storage is available");}else{if(!d.C())throw Error("Invalid [cleanSession] value for a shared connection: "+d.C());if(d.oa())throw Error("Invalid [willMessage] value for a shared connection: "+d.oa());if(d.na())throw Error("Invalid [storage] value for a shared connection: "+
d.na());}this.o=d;d=this.o.oa()||{qos:"",destinationName:"",retained:"",payloadString:""};d="connection|"+[String(d.qos),u(d.destinationName),!0===d.retained?"1":"0",n.Ea(d.payloadString)].join("|")+"|"+this.W();a=this.G?"no":"yes";this.H=new c("DISTINCT");this.H.setItems([d]);this.H.setFieldSchema("connection_schema");this.H.setDataAdapter("Connector");this.H.setRequestedSnapshot(a);this.H.setRequestedMaxFrequency("unfiltered");this.H.addListener(this);f.debug("Connection Subscription built");this.f=
k.CONNECTING;this.j.addListener(this);this.j.subscribe(this.H);if("DISCONNECTED:TRYING-RECOVERY"==this.j.getStatus())this.onStatusChange(this.j.getStatus());f.info("Connection request submitted to MQTT.Cool")},ab:function(){this.H=null;this.i={};this.Z={};this.s=[];this.X=0;this.F={};this.v={};this.ia={};this.w=this.o=null;this.f=k.DISCONNECTED;this.$=r++},I:function(d,a){for(var c in this.v)this.j.unsubscribe(this.v[c].ba);this.H&&this.j.unsubscribe(this.H);this.j.removeListener(this);var e=this.f,
g=k.N(e);c=this.o;this.ab();if(d instanceof Error)f.logError("Client stop due to an error",d),b.b(this,"onError",[d]);else switch(e){case k.CONNECTING:f.debug('Client in CONNECTING status, interrupt and notify by invoking of "onFailure()"');d==l.l.Ua?(f.debug('Unauthorized connection, interrupt and notify byinvoking of "onNotAuthorized()"'),e=l.aa(a),c.U(e)):d==l.l.ra?c.D(a):d==l.l.da?(e=b.O(d.code,a),c.D(e)):c.D(d.P);break;case k.CONNECTED:case k.DISCONNECTING:f.debug("Client in "+g+' status, interrupt and notify by invoking "onConnectionLost()"');
b.b(this,"onConnectionLost",[d.P]);break;case k.RETRY:case k.RECOVERY:f.debug("Client in "+e+' status, interrupt and notify by invoking "onConnectionLost()"'),b.b(this,"onConnectionLost",[d.P])}},onSubscriptionError:function(d,a){f.logWarn("Subscription Error:",b.O(d,a));var c=l.la(d);c==l.l.da&&(a="SERVER_ERROR\x3d\x3e code: \x3c"+d+"\x3e, message: \x3c"+a+"\x3e");this.I(c,a)},ja:function(d){this.s.push(d);d.pb&&this.J(d)},ec:function(d,a){this.s.unshift(d);(a||"undefined"==typeof a)&&this.J(d)},
K:function(d){var a=-1;if("function"==typeof d)for(var b=0;b<this.s.length;b++){if(d(this.s[b])){a=b;break}}else a=this.s.indexOf(d);-1!=a?(d=this.s.splice(a,1),f.logDebug("Removed packet: "+d[0].getStatus()+" from the message queue")):f.logDebug("No packet to remove has been found")},qc:function(){f.debug("Queue processing...");if(0==this.s.length)f.debug("No messages to process from the Queue");else{for(var d=this.s.slice().reverse(),a=null;a=d.pop();)this.J(a),f.debug("Submitted packet: "+a.getStatus());
f.debug("Queue processed")}},J:function(d){f.debug("Sending: "+d.getStatus());var a=d.Ic(this.W()),b=this;this.j.sendMessage(a,"PROTOCOL",2E3,{onProcessed:function(){d.pa||b.K(d);d.processed++;f.logDebug("Processed:",d.getStatus());d.Ha&&d.Ha()},onDiscarded:function(){f.warn("Message discarded")},onAbort:function(a,c){d.aborted++;f.logWarn("Aborted for requester "+b.$+" \x3csent "+c+"\x3e:",d.getStatus());d.ub&&d.ub()},onDeny:function(a,c,x){f.warn("Message denied: ("+c+", "+x+")");d.pa&&(f.debug("Removing the message from sent messages, as it requires an ack"),
delete b.i[d.body.packetId]);b.K(d);d.Ga&&d.Ga(c,x)},onError:function(){f.logWarn("onError while sending \x3c "+d.getStatus()+"\x3e for requestId:"+b.$);d.Cd=!0}},!1)},Jb:function(d,a){this.G?this.Eb(d,a):this.Hb(d,a)},Eb:function(d,a){var b=h.sb(++this.X,d,a.ma(),a);b.Ga=function(d,b){var c=l.aa(b);a.U(c)};this.i[b.body.packetId]=b;this.ja(b);f.debug("SUBSCRIBE packet scheduled for delivery");this.c.qd(b)},Hb:function(d,a){var b=this.v[d];if(b){var c=function(b){b.addListener({onUnsubscription:function(){b.removeListener(this);
f.Aa(d,a)}});f.j.unsubscribe(b)},f=this;b.ba.isSubscribed()?c(b.ba):b.Ka.push(c)}else this.Aa(d,a)},Aa:function(d,a){var b=a.ma(),e="subscribe|"+b+"|"+u(d)+"|"+this.W(),g=new c("MERGE");g.setItems([e]);g.setFieldSchema("subscribe_schema");g.setDataAdapter("Connector");g.setRequestedSnapshot("no");g.setSelector((this.kb||function(){return Math.random().toString(36).slice(-10)})());g.setRequestedMaxFrequency(0<b?"unfiltered":a.getRequestedMaxFrequency());(e=this.v[d])?e.ba=g:this.v[d]={ba:g,qb:{},Ka:[]};
var k=this;g.addListener({T:!1,onListenStart:function(d){k.c.ld(d)},onSubscription:function(){f.debug("Subscription on shared connection to \x3c"+d+"\x3e has been submitted to MQTT.Cool");f.debug("Sending SUBSCRIBE packet to enable the MQTT subscription");var a=h.sb(-1,d,b);a.pa=!1;k.J(a)},onSubscriptionError:function(b,c){f.logWarn("Received error for subscription on shared connection",b,c);var e=l.la(b);k.j.unsubscribe(g);switch(e){case l.l.Wa:e=l.aa(c);a.U(e);break;case l.l.La:f.warn("Conflicting selector, resubmitting a new subscription with a new Selector");
k.Aa(d,a);break;default:f.logWarn("Unmanageable error code",b)}},onItemUpdate:function(c){c={suback:parseInt(c.getValue(1),10),seq:c.getValue(2)?parseInt(c.getValue(2),10):null,destinationName:c.getValue(3),payload:c.getValue(4),qos:parseInt(c.getValue(5),10),duplicate:"1"===c.getValue(6),retained:"1"===c.getValue(7)};var e=JSON.stringify(c);f.logDebug("Received event for SharedSubscription",k.W(),e);if(isNaN(c.suback)){var e=k.v[d],h;for(h in k.v){var l=k.v[h],m;if(m=l!==e)if(m=l.ud>b)a:if(l=l.Fc,
m=c.destinationName.split("/"),l.length>m.length)m=!1;else{for(var p=Math.min(m.length,l.length),w=!0,n=0;n<p&&w;n++){if("#"===l[n]){m=!0;break a}w=m[n]===l[n]||"+"===l[n]}m=w&&n==m.length}if(m){f.debug("Found a matching subscription with greater qos, skipping");return}}h=k.ia[c.destinationName];if(!h)h={Bd:c.destinationName,wb:0,Ja:{}},k.ia[c.destinationName]=h;else if(c.seq<=h.wb){f.debug("Seq Id "+c.seq+" already received, skipping");return}h.wb=c.seq;h.Ja[d]=e;e.qb[c.destinationName]=h;e.Fa<c.qos&&
f.debug("Message QoS downgraded from \x3c"+c.qos+"\x3e to \x3c"+e.Fa+"\x3e");c.qos=Math.min(c.qos,e.Fa);k.ga(c)}else{f.debug("SUBACK event for topicFilter: "+d);k.c.nd(g,c);e=c.suback;if(0<=e&&2>=e)this.T?f.debug("Subscription already notified"):(f.debug("Subscription not already notified"),h=Math.min(a.ma(),e),h<e&&f.debug("Notified QoS downgraded from \x3c"+e+"\x3e to \x3c"+h+"\x3e"),this.T=!0,l=k.v[d],l.Fa=h,l.ud=e,l.Fc=d.split("/"),(e=l.Ka.shift())&&e(g),a.B(h));else if(128==e)k.j.unsubscribe(g),
g.removeListener(this),a.D(e);else throw Error("Unexpected return code: "+e);k.c.md(g,c)}}});this.j.subscribe(g)},Kb:function(d,a){this.G?this.Fb(d,a):this.Ib(d,a)},Ib:function(d,a){f.logDebug("Unsubscribing shared subscription from:",d);var c=this.v[d];if(c){var e=function(e){e.addListener({onUnsubscription:function(){delete g.v[d];f.logDebug("Received onUnsubscription() event related to unsubscribing from: ",d);for(var h in c.qb){var k=g.ia[h];delete k.Ja[d];b.Pc(k.Ja)&&delete g.ia[h]}e.removeListener(this);
a.B();f.logDebug('Removed subscription on shared connection mapped by "'+d+'"');f.info('Successful completion of unsubscription request from "'+d+'"')}});g.j.unsubscribe(e);g.c.tb(e);f.info('Submitted unsubscription request from "'+d+'"')};f.logDebug("Found subscription on shared connection associated with:",d);var g=this,h=c.ba;h.isSubscribed()?e(h):c.Ka.push(e)}else f.logWarn("No subscription on shared connection found for topicFilter:",d),f.debug("Notifying in any case"),this.c.tb(),a.B()},Fb:function(d,
a){var b=this.F[d],b=h.Wc(++this.X,d,a,b);this.i[b.body.packetId]=b;this.ja(b);this.c.td(b)},Gb:function(d){var a=h.Uc(d);0<d.qos&&(a.body.packetId=++this.X,a.pa=!0,this.o.C()||(f.debug("Storing message into the Store with SENT state"),this.w.qa(a.body,m.u.SENT)),this.i[a.body.packetId]=a);var c=this;a.Ga=function(e,g){var h=a.body.packetId;h&&!c.o.C()&&(f.debug("Removing the message from the Store"),c.w.remove(h,m.u.SENT));f.debug('Invoking "onMessageNotAuthorized" callback');l.la(e)==l.l.Va?b.b(c,
"onMessageNotAuthorized",[d,l.aa(g)]):f.logWarn("Unmanageable error code",e)};this.c.Dc(a);this.ja(a);f.debug("Scheduled PUBLISH packet for delivery");0==d.qos&&(f.debug('Invoking now "onMessageDelivered" callback, as QoS 0'),setTimeout(function(){c.ha(d)}));this.c.hd(a)},ha:function(d){var a=d;d instanceof q||(a=p.Da(d));b.b(this,"onMessageDelivered",[a])},ga:function(d){d=p.Da(d);b.b(this,"onMessageArrived",[d])},pc:function(){f.debug("Submitting pending messages");f.debug("Iterating over "+Object.keys(this.F).length+
" active subscriptions");f.debug("Active subscriptions "+this.F);for(var d in this.F){var a=++this.X,b=this.F[d];b.body.packetId=a;this.i[a]=b;this.ec(b,!1)}this.qc();f.info("Pending messages submitted")},Db:function(d){var a=d.body.topicFilter;this.F[a]?f.debug("Subscription to ["+a+"] filter already tracked."):(this.F[a]=d,f.logDebug("Tracked subscription to filter:",a))},rc:function(d){d?(d=d.body.topicFilter,this.F[d]?(delete this.F[d],f.logDebug("Subscription to {topicFilter} removed:",d)):f.logDebug("No Subscription to:",
d)):f.warn("The arrived UNSUBACK does not match any SUBSCRIBE request")},onItemUpdate:function(d){var a=d.getValue(1);f.debug("Received event: "+a+" on client  "+this.$+", isSnapshot: "+d.isSnapshot());d=JSON.parse(a);try{if("undefined"==typeof d.type)throw Error('Malformed event, no "type" has been specified');switch(d.type){case "CONNECTION_ERROR":this.I(l.l.Na);break;case "DELIVERY_COMPLETE":if(!this.o.C())throw f.error("Unexpected event"),Error("Event not allowed");this.gc(d.message);break;case "CONTROL_PACKET":var b=
d.message,c=b.type;if(!c)throw Error('Malformed packet, no "type" has been specified');if(!this.G&&c!=h.g.Ma)throw f.error("Unexpected event"),Error("Event not allowed");this.cc(b)}}catch(e){b=e,!e instanceof Error&&(b=Error(e)),this.I(b)}},cc:function(d){var a=d.packetId;switch(d.type){case h.g.Ma:this.fc(d);break;case h.g.Ab:this.mc(a,d.returnCode[0]);break;case h.g.Cb:this.nc(a);break;case h.g.Oa:this.hc(a);break;case h.g.Qa:this.jc(a);break;case h.g.Ra:this.kc(a);break;case h.g.Pa:this.ic(a);
break;case h.g.ca:this.lc(d)}},dc:function(){if(this.o.C())this.w&&this.w.clear();else{var a=this;this.w.vb(function(b){var c=new h(b.body,!0),e=c.body.packetId;a.X=e;switch(b.state){case m.u.SENT:c.body.message.duplicate=!0;var g=null;b.Dd?(g=h.rb(e,!0),c.processed=1):g=c;f.logDebug("Populating sent messages with the PUBLISH packet with packet id:",e);a.i[e]=c;f.logDebug("Removing duplicates from the message queue");a.K(function(a){return a.body.type==h.g.ca&&a.body.packetId==e?!0:!1});f.logDebug("PUBLISH packet scheduled for delivery");
g.pb=!1;a.ja(g);break;case m.u.RECEIVED:f.logDebug("Insert into into the map of received messages a PUBLISH packet with packet id:",e),a.Z[e]=c}},function(){f.debug("Session restored")})}},fc:function(a){f.debug("Handling CONNACK");this.c.Xc(a);a=a.returnCode;if(0==a){f.logDebug("Connection Accepted for client:",this.$);a=!1;var c=this.f;if(c==k.CONNECTING)this.f=k.CONNECTED;else if(c==k.RETRY)this.f=k.CONNECTED,a=!0;else return f.logError("Unexpected CONNACK packet as current status is",k.N(this.f)),
Error("Broken protocol on CONNACK reception");f.logDebug("Status switched from "+k.N(c)+" to "+k.N(this.f));this.G&&this.dc();f.debug("Starting to process pending messages");this.pc();a?b.b(this,"onReconnectionComplete"):this.o.B()}else f.logWarn("Connection refused with error code:",a),this.I(l.l.ra,b.O(a,A[a]))},gc:function(a){f.logDebug("Completion of message delivery for packetId:",a);this.c.Zc(a);var b=this.i[a];null!=b?(f.debug("Removing from sent messages"),delete this.i[a],this.K(b),f.debug("Invoking onMessageDelivered() callback now, as the message has been delivered"),
this.ha(b.body.message)):f.warn("No packetId : "+a+" found!");this.c.Yc(a)},mc:function(a,b){f.logDebug("Handling SUBACK \x3c"+b+"\x3e for packetId",a);this.c.pd(a,b);var c=this.i[a];if(c){var e=c.body.type;if(e!==h.g.Sa)throw f.error("The matched packet is a "+e+", but a SUBSCRIBE is expected"),Error("Broken protocol on SUBACK reception");delete this.i[a];this.K(c);128!=b?c.T?f.debug("Subscription already notified"):(this.o.C()&&this.Db(c),c.T=!0,c.options.B(b)):c.options.D(b)}else throw f.error("The arrived SUBACK does not match any SUBSCRIBE request"),
Error("Broken protocol on SUBACK reception");this.c.od(a,b)},nc:function(a){f.logDebug("Handling UNSUBACK for packetId",a);this.c.sd(a);var b=this.i[a];if(b){var c=b.body.type;if(c!==h.g.Xa)throw f.error("The matched packet is a "+c+", but a UNSUBSCRIBE is expected"),Error("Broken protocol on UNSUBACK reception");delete this.i[a];this.K(b);this.rc(b.sourceSubPacket);b.options.B()}else throw f.error("The arrived UNSUBACK does not match any UNSUBSCRIBE request"),Error("Broken protocol on UNSUBACK reception");
this.c.rd(a)},ea:function(a,b,c){var e=a.body.type,g=a.body.message.qos;if(e!==h.g.ca)throw f.error("The matched packet is a "+e+", but a PUBLISH is expected"),Error("Broken protocol");if(g!=b)throw f.error("The matched packet has QoS "+g+", but "+b+" is expected"),Error("Broken protocol");if(c&&0==a.processed)throw f.error("The matched packet has not been processed yet"),Error("Broken protocol");},hc:function(a){f.logDebug("Handling PUBACK for packetId",a);this.c.ad(a);var b=this.i[a];b?(this.ea(b,
1),f.debug("Removing the message from sent messages, as it requires an ack"),delete this.i[a],this.K(b),this.ha(b.body.message),f.debug("Removing the message from the Store"),this.w.remove(a,m.u.SENT)):(f.warn("The arrived PUBACK does not match any PUBLISH message"),Error("Broken Protocol on PUBACK reception"));this.c.$c(a)},jc:function(a){f.logDebug("Handling PUBREC for packetId",a);var b=this;this.c.ed(a,function(){var c=b.i[a];c?(b.ea(c,2),f.debug('Storing the message into the Store with SENT state and "pubrecReceived" flag set to true'),
b.w.qa(c.body,m.u.SENT,!0),b.J(h.rb(a)),f.debug("PUBREL packet scheduled for delivery")):(f.warn("The arrived PUBREC does not match any PUBLISH message"),Error("Broken Protocol on PUBREC reception"));b.c.dd(a)})},kc:function(a){f.logDebug("Handling PUBREL for packetId",a);this.c.gd(a);var b=this.Z[a];b?(this.ea(b,2,!1),f.debug("Removing the message from the map of received PUBLISH messages"),delete this.Z[a],this.w.remove(a,m.u.RECEIVED),this.ga(b.body.message)):f.warn("The arrived PUBREL does not match any PUBLISH message");
this.J(h.Tc(a));f.debug("PUBCOMP packet scheduled for delivery");this.c.fd(a)},ic:function(a){f.logDebug("Handling PUBCOMP for packetId",a);this.c.cd(a);var b=this.i[a];if(b)this.ea(b,2),this.ha(b.body.message),delete this.i[a],this.K(b),f.debug("Removing the message from the Store"),this.w.remove(b.body.packetId,m.u.SENT);else throw f.warn("The arrived PUBCOMP does not match any PUBLISH message"),Error("Broken protocol on PUBCOMP reception");this.c.bd(a)},lc:function(a){var b=new h(a),c=b.body.packetId;
f.logDebug("Handling PUBLISH with packetId:",c);this.c.kd(a);a=b.body.message.qos;if(0==a||this.o.C())this.ga(b.body.message);else switch(a){case 1:this.J(h.Sc(c));this.ga(b.body.message);break;case 2:f.logDebug("Inserted into the map of received messages a PUBLISH packet with packet id:",c),this.Z[c]=b,this.w.qa(b.body,m.u.RECEIVED),this.J(h.Vc(c))}this.c.jd(b)},Cc:function(a,c){var e=k.N(a);f.debug("Handling connection recovery while in status "+e+" and LS in status "+c);switch(a){case k.CONNECTING:this.I(l.l.sa);
break;case k.CONNECTED:case k.RETRY:case k.RECOVERY:"DISCONNECTED:WILL-RETRY"==c?(f.debug("Switching status to RETRY"),this.f=k.RETRY):"DISCONNECTED:TRYING-RECOVERY"==c&&(f.debug("Switching status to RECOVERY"),this.f=k.RECOVERY);b.b(this,"onReconnectionStart");break;default:f.logWarn("No action found for status:",e)}},onServerError:function(a,b){f.error("errorCode"+a+", errorMessage:"+b)},onStatusChange:function(a){f.logDebug("Status changed --\x3e",a);if(0==a.indexOf("CONNECTED:")&&this.f==k.RECOVERY)this.f=
k.CONNECTED,b.b(this,"onReconnectionComplete");else if("DISCONNECTED:WILL-RETRY"==a||"DISCONNECTED:TRYING-RECOVERY"==a)try{this.Cc(this.f,a)}catch(c){a=c,!a instanceof Error&&(a=Error(c)),this.I(a)}else"DISCONNECTED"==a&&this.I(l.l.ta)},uc:function(a){b.h(a,"function","onConnectionLost",!0);this.bb=a},Tb:function(){return this.bb},zc:function(a){b.h(a,"function","onReconnectionStart",!0);this.hb=a},Yb:function(){return this.hb},yc:function(a){b.h(a,"function","onReconnectionComplete",!0);this.gb=
a},Xb:function(){return this.gb},vc:function(a){b.h(a,"function","onMessageArrived",!0);this.cb=a},Ub:function(){return this.cb},wc:function(a){b.h(a,"function","onMessageDelivered",!0);this.eb=a},Vb:function(){return this.eb},xc:function(a){b.h(a,"function","onMessageNotAuthorized",!0);this.fb=a},Wb:function(){return this.fb}};g.STATUS=k;g.prototype.onItemUpdate=g.prototype.onItemUpdate;g.prototype._getClientId=g.prototype.Pb;g.prototype._getConnectionId=g.prototype.W;g.prototype._getConnectionOptions=
g.prototype.Qb;g.prototype._getStore=g.prototype.bc;g.prototype._getBrokerAddress=g.prototype.Nb;g.prototype._getStatus=g.prototype.ac;g.prototype._getSent=g.prototype.$b;g.prototype._getReceived=g.prototype.Zb;g.prototype._getMessageQueueSize=g.prototype.Sb;g.prototype._getMessageQueue=g.prototype.Rb;g.prototype._peek=g.prototype.oc;g.prototype._getActiveSubscriptions=g.prototype.Mb;g.prototype._getActiveSharedSubscriptions=g.prototype.Lb;g.prototype._setProtocolListener=g.prototype.Ac;g.prototype._setSelectorStrategy=
g.prototype.Bc;g.prototype.connect=g.prototype.connect;g.prototype.disconnect=g.prototype.disconnect;g.prototype.send=g.prototype.send;g.prototype.subscribe=g.prototype.subscribe;g.prototype.unsubscribe=g.prototype.unsubscribe;Object.defineProperties(g.prototype,{onConnectionLost:{set:g.prototype.uc,get:g.prototype.Tb},onReconnectionStart:{set:g.prototype.zc,get:g.prototype.Yb},onReconnectionComplete:{set:g.prototype.yc,get:g.prototype.Xb},onMessageArrived:{set:g.prototype.vc,get:g.prototype.Ub},
onMessageDelivered:{set:g.prototype.wc,get:g.prototype.Vb},onMessageNotAuthorized:{set:g.prototype.xc,get:g.prototype.Wb}});return g});
define("MQTTCoolSessionImpl",["MqttClientImpl","Objects","Env"],function(e,c,a){function b(a,b){this.tc=a;this.j=b}var l=["tcp:","mqtt:","mqtts:","ssl:"];b.prototype={Ec:function(b,n){c.h(b,"string","brokerReference");var m="";a.S()?m=require("url").parse(b):(m=document.createElement("a"),m.href=b);if(-1==l.indexOf(m.protocol)&&!/^[A-Za-z0-9_-]+$/.test(b))throw Error("Invalid [brokerReference] argument: \x3c"+b+"\x3e");n&&c.R(n,"clientId");return new e(b,n||"",this.j)},close:function(){this.j.disconnect()},
toString:function(){return String(this.tc)}};b.prototype.createClient=b.prototype.Ec;b.prototype.close=b.prototype.close;return b});
define("openSession",["LightstreamerClient","Objects","LoggerManager","MQTTCoolSessionImpl","Errors"],function(e,c,a,b,l){function p(a,e,n,g){m.debug("Creating a new MQTTCoolSession");var t,h,u,f;if(2<=arguments.length&&4>=arguments.length)2==arguments.length?(c.h(arguments[0],"string","serverAddress"),c.h(arguments[1],"object","listener"),t=arguments[0],f=arguments[1]):3==arguments.length?(c.h(arguments[0],"string","serverAddress"),c.h(arguments[1],"string","username",!0),c.h(arguments[2],"object",
"listener"),t=arguments[0],h=arguments[1],f=arguments[2]):4==arguments.length&&(c.h(arguments[0],"string","serverAddress"),c.h(arguments[1],"string","username",!0),c.h(arguments[2],"string","password",!0),c.h(arguments[3],"object","listener"),t=arguments[0],h=arguments[1],u=arguments[2],f=arguments[3]);else throw m.error("ERROR - Please supply the correct number of arguments"),Error("Please supply the correct number of arguments");var r=null,r=c.b(p,"__lightstreamerFactory",[t,p.ADAPTER_SET]);r.connectionDetails.setUser(h);
r.connectionDetails.setPassword(u);t=q++;var k=new b(t,r);m.debug("MQTTCoolSession created");r.addListener({onServerError:function(a,b){var e=l.la(a),g;g=e!==l.l.da?l.aa(b):c.O(a,b);r.removeListener(this);r.disconnect();c.b(f,"onConnectionFailure",[e.A,g?g.errorCode:void 0,g?g.errorMessage:void 0])},onListenStart:function(a){m.debug("Starting ConnectionListener");c.b(f,"onLsClient",[a])},onStatusChange:function(a){switch(a){case "CONNECTED:WS-STREAMING":case "CONNECTED:HTTP-STREAMING":case "CONNECTED:WS-POLLING":case "CONNECTED:HTTP-POLLING":c.b(f,
"onConnectionSuccess",[k]),r.removeListener(this)}}});m.debug("Connecting to the MQTT.Cool server");r.connect();m.debug("Connection request submitted")}function n(a,b){return new e(a,b)}var m=a.getLoggerProxy("mqtt.cool");m.info("Logger SETUP");var q=0;p.__lightstreamerFactory=n;p.__resetFactory=function(){p.__lightstreamerFactory=n;p.ADAPTER_SET="MQTT"};p.LIB_NAME="nodejs_client";p.LIB_VERSION="1.2.5 build 215";p.ADAPTER_SET="MQTT";return p});
define("DefaultStorage_node",["Env"],function(e){if(e.S()){var c=require("fs"),a=require("path");e=function(){try{c.readdirSync("mqttcool-storage")}catch(a){c.mkdirSync("mqttcool-storage")}};e.prototype={ya:function(b){return a.join("mqttcool-storage",b)},set:function(a,e){c.writeFileSync(this.ya(a),e)},get:function(a){try{return c.readFileSync(this.ya(a),"utf8")}catch(e){}},remove:function(a){c.unlinkSync(this.ya(a))},keys:function(){return c.readdirSync("mqttcool-storage")},Ca:function(){c.rmdirSync("mqttcool-storage")}};
e.prototype.set=e.prototype.set;e.prototype.get=e.prototype.get;e.prototype.remove=e.prototype.remove;e.prototype.keys=e.prototype.keys;e.prototype.clearAll=e.prototype.Ca;return e}});define("req_alt",[],function(){return function(){}});
//# sourceMappingURL=LightstreamerMQTT.js.map